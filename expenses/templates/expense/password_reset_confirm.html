{# expenses/templates/expense/password_reset_confirm.html #}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Confirm Password Reset - Expense Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-100 to-blue-50 flex items-center justify-center min-h-screen text-gray-800">
    <main class="bg-white p-8 rounded-2xl shadow-lg border border-blue-200 max-w-lg w-full text-center">
        {% if validlink %}
            <h2 class="text-3xl font-extrabold text-blue-900 mb-6 tracking-wide">Set a New Password</h2>
            <form method="post" class="space-y-6 text-left">
                {% csrf_token %}
                {% for field in form %}
                    <div>
                        {{ field.label_tag|add_class:"block text-sm font-semibold text-gray-700 mb-1" }}
                        {{ field|add_class:"w-full px-4 py-2 border border-blue-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" }}
                        {% if field.help_text %}
                            <small class="text-sm text-gray-500">{{ field.help_text }}</small>
                        {% endif %}
                        {% for error in field.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endfor %}
                <button type="submit" 
                        class="w-full bg-blue-600 text-white font-semibold py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-300">
                    Set password
                </button>
            </form>
        {% else %}
            <h2 class="text-3xl font-extrabold text-red-600 mb-6 tracking-wide">Password Reset Failed</h2>
            <p class="text-gray-700 mb-4">
                The password reset link was invalid, possibly because it has already been used. Please request a new password reset.
            </p>
            <a href="{% url 'password_reset' %}" 
               class="inline-block px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl shadow-md hover:bg-blue-700 transition-colors duration-300">
                Request a new password reset
            </a>
        {% endif %}
    </main>
</body>
</html>
